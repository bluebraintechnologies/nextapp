"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5643],{17327:function(e,t,n){n.d(t,{l:function(){return d}});var r=n(85893),o=n(87536),u=n(95496),i=n(67294);function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){c(e,t,n[t])}))}return e}function l(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},u=Object.keys(e);for(r=0;r<u.length;r++)n=u[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(r=0;r<u.length;r++)n=u[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,u=[],i=!0,a=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(u.push(r.value),!t||u.length!==t);i=!0);}catch(c){a=!0,o=c}finally{try{i||null==n.return||n.return()}finally{if(a)throw o}}return u}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var d=function(e){var t=e.onSubmit,n=e.children,a=e.options,c=e.validationSchema,d=e.serverError,b=e.resetValues,m=l(e,["onSubmit","children","options","validationSchema","serverError","resetValues"]),p=(0,o.cI)(s({},!!c&&{resolver:(0,u.X)(c)},!!a&&a));return(0,i.useEffect)((function(){d&&Object.entries(d).forEach((function(e){var t=f(e,2),n=t[0],r=t[1];p.setError(n,{type:"manual",message:r})}))}),[d,p]),(0,i.useEffect)((function(){b&&p.reset(b)}),[b,p]),(0,r.jsx)("form",s({onSubmit:p.handleSubmit(t),noValidate:!0},m,{children:n(p)}))}},50381:function(e,t,n){var r=n(85893),o=n(94184),u=n.n(o),i=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){a(e,t,n[t])}))}return e}function s(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},u=Object.keys(e);for(r=0;r<u.length;r++)n=u[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(r=0;r<u.length;r++)n=u[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l="px-4 h-12 flex items-center w-full rounded appearance-none transition duration-300 ease-in-out text-heading text-sm focus:outline-none focus:ring-0",f="bg-gray-100 border border-border-base focus:shadow focus:bg-light focus:border-accent",d="bg-gray-100 border border-border-100 focus:bg-light focus:border-accent",b="border border-border-base focus:border-accent",m="focus:shadow",p={small:"text-sm h-10",medium:"h-12",big:"h-14"},y=i.forwardRef((function(e,t){var n,o=e.className,i=e.label,y=e.note,v=e.name,g=e.error,S=(e.children,e.variant),h=void 0===S?"normal":S,O=e.dimension,P=void 0===O?"medium":O,w=e.shadow,E=void 0!==w&&w,j=e.type,N=void 0===j?"text":j,x=e.inputClassName,A=e.disabled,R=e.showLabel,k=void 0===R||R,M=s(e,["className","label","note","name","error","children","variant","dimension","shadow","type","inputClassName","disabled","showLabel"]),Q=u()(l,(a(n={},f,"normal"===h),a(n,d,"solid"===h),a(n,b,"outline"===h),n),a({},m,E),p[P],x),B="number"===N&&A?"number-disable":"";return(0,r.jsxs)("div",{className:o,children:[k?(0,r.jsx)("label",{htmlFor:v,className:"mb-3 block text-sm font-semibold leading-none text-body-dark",children:i}):"",(0,r.jsx)("input",c({id:v,name:v,type:N,ref:t,className:"".concat(Q," ").concat(A?"cursor-not-allowed border-[#D4D8DD] bg-[#EEF1F4] ".concat(B," select-none"):""),autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:"false",disabled:A,"aria-invalid":g?"true":"false"},M)),y&&(0,r.jsx)("p",{className:"mt-2 text-xs text-body",children:y}),g&&(0,r.jsx)("p",{className:"my-2 text-xs text-red-500 text-start",children:g})]})}));y.displayName="Input",t.Z=y},65643:function(e,t,n){n.r(t);var r=n(85893),o=n(17327),u=n(14685),i=n(96720),a=n(50381),c=n(70300),s=n(66639),l=n(74231);function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){f(e,t,n[t])}))}return e}var b=l.Ry().shape({points:l.Rx().typeError("wallet points must be a number").positive("wallet points must be positive").required("You must need to set wallet points")});t.default=function(){var e=(0,c.$G)().t,t=(0,s.h3)(),n=t.mutate,l=t.isLoading,f=(0,i.X9)().data,m=(0,i.SO)().closeModal;return(0,r.jsx)(o.l,{onSubmit:function(e){var t=e.points;n({customer_id:f,points:t}),m()},validationSchema:b,children:function(t){var n,o=t.register,i=t.formState.errors;return(0,r.jsxs)("div",{className:"m-auto flex w-full max-w-sm flex-col rounded bg-light p-5 sm:w-[24rem]",children:[(0,r.jsx)(a.Z,d({label:e("form:input-label-add-wallet-points")},o("points"),{variant:"outline",className:"mb-4",error:e(null===(n=i.points)||void 0===n?void 0:n.message)})),(0,r.jsx)(u.Z,{type:"submit",loading:l,disabled:l,className:"ms-auto",children:e("form:button-label-submit")})]})}})}},59338:function(e,t,n){n.d(t,{B:function(){return s}});var r=n(17785),o=n(14141);function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(this,arguments)}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){u(e,t,n[t])}))}return e}function c(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},u=Object.keys(e);for(r=0;r<u.length;r++)n=u[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(r=0;r<u.length;r++)n=u[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s={me:function(){return o.eN.get(r.P.ME)},login:function(e){return o.eN.post(r.P.TOKEN,e)},logout:function(){return o.eN.post(r.P.LOGOUT,{})},register:function(e){return o.eN.post(r.P.REGISTER,e)},update:function(e){var t=e.id,n=e.input;return o.eN.put("".concat(r.P.USERS,"/").concat(t),n)},changePassword:function(e){return o.eN.post(r.P.CHANGE_PASSWORD,e)},forgetPassword:function(e){return o.eN.post(r.P.FORGET_PASSWORD,e)},verifyForgetPasswordToken:function(e){return o.eN.post(r.P.VERIFY_FORGET_PASSWORD_TOKEN,e)},resetPassword:function(e){return o.eN.post(r.P.RESET_PASSWORD,e)},makeAdmin:function(e){return o.eN.post(r.P.MAKE_ADMIN,e)},block:function(e){return o.eN.post(r.P.BLOCK_USER,e)},unblock:function(e){return o.eN.post(r.P.UNBLOCK_USER,e)},addWalletPoints:function(e){return o.eN.post(r.P.ADD_WALLET_POINTS,e)},fetchUsers:function(e){var t=e.name,n=c(e,["name"]);return o.eN.get(r.P.USERS,a({searchJoin:"and",with:"wallet"},n,{search:o.eN.formatSearchParams({name:t})}))},fetchAdmins:function(e){var t=i({},e);return o.eN.get(r.P.ADMIN_LIST,a({searchJoin:"and"},t))},fetchUser:function(e){var t=e.id;return o.eN.get("".concat(r.P.USERS,"/").concat(t))}}},66639:function(e,t,n){n.d(t,{UE:function(){return b},f0:function(){return m},_y:function(){return p},l4:function(){return y},kD:function(){return v},$h:function(){return g},xy:function(){return S},AV:function(){return h},gL:function(){return O},lJ:function(){return P},q3:function(){return w},xE:function(){return E},h3:function(){return j},bT:function(){return N},xY:function(){return x},Jc:function(){return A}});var r=n(13135),o=n(90551),u=n(31955),i=n(70300),a=n(11163),c=n(88767),s=n(40782),l=n(17785),f=n(59338),d=n(66889),b=function(){return(0,c.useQuery)([l.P.ME],f.B.me)};function m(){return(0,c.useMutation)(f.B.login)}var p=function(){var e=(0,a.useRouter)(),t=(0,i.$G)().t;return(0,c.useMutation)(f.B.logout,{onSuccess:function(){u.Z.remove(r.E$),e.replace(o.Z.login),s.Am.success(t("common:successfully-logout"))}})},y=function(){var e=(0,c.useQueryClient)(),t=(0,i.$G)().t;return(0,c.useMutation)(f.B.register,{onSuccess:function(){s.Am.success(t("common:successfully-register"))},onSettled:function(){e.invalidateQueries(l.P.REGISTER)}})},v=function(){var e=(0,i.$G)().t,t=(0,c.useQueryClient)();return(0,c.useMutation)(f.B.update,{onSuccess:function(){s.Am.success(e("common:successfully-updated"))},onSettled:function(){t.invalidateQueries(l.P.ME),t.invalidateQueries(l.P.USERS)}})},g=function(){return(0,c.useMutation)(f.B.changePassword)},S=function(){return(0,c.useMutation)(f.B.forgetPassword)},h=function(){return(0,c.useMutation)(f.B.verifyForgetPasswordToken)},O=function(){return(0,c.useMutation)(f.B.resetPassword)},P=function(){var e=(0,c.useQueryClient)(),t=(0,i.$G)().t;return(0,c.useMutation)(f.B.makeAdmin,{onSuccess:function(){s.Am.success(t("common:successfully-updated"))},onSettled:function(){e.invalidateQueries(l.P.USERS)}})},w=function(){var e=(0,c.useQueryClient)(),t=(0,i.$G)().t;return(0,c.useMutation)(f.B.block,{onSuccess:function(){s.Am.success(t("common:successfully-block"))},onSettled:function(){e.invalidateQueries(l.P.USERS),e.invalidateQueries(l.P.STAFFS)}})},E=function(){var e=(0,c.useQueryClient)(),t=(0,i.$G)().t;return(0,c.useMutation)(f.B.unblock,{onSuccess:function(){s.Am.success(t("common:successfully-unblock"))},onSettled:function(){e.invalidateQueries(l.P.USERS),e.invalidateQueries(l.P.STAFFS)}})},j=function(){var e=(0,i.$G)().t,t=(0,c.useQueryClient)();return(0,c.useMutation)(f.B.addWalletPoints,{onSuccess:function(){s.Am.success(e("common:successfully-updated"))},onSettled:function(){t.invalidateQueries(l.P.USERS)}})},N=function(e){var t=e.id;return(0,c.useQuery)([l.P.USERS,t],(function(){return f.B.fetchUser({id:t})}),{enabled:Boolean(t)})},x=function(e){var t,n=(0,c.useQuery)([l.P.USERS,e],(function(){return f.B.fetchUsers(e)}),{keepPreviousData:!0}),r=n.data,o=n.isLoading,u=n.error;return{users:null!==(t=null===r||void 0===r?void 0:r.data)&&void 0!==t?t:[],paginatorInfo:(0,d.Q)(r),loading:o,error:u}},A=function(e){var t,n=(0,c.useQuery)([l.P.ADMIN_LIST,e],(function(){return f.B.fetchAdmins(e)}),{keepPreviousData:!0}),r=n.data,o=n.isLoading,u=n.error;return{admins:null!==(t=null===r||void 0===r?void 0:r.data)&&void 0!==t?t:[],paginatorInfo:(0,d.Q)(r),loading:o,error:u}}}}]);