"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1329],{81329:function(e,n,t){t.r(n);var r=t(34051),o=t.n(r),a=t(85893),u=t(41464),i=t(96720),c=t(54605),s=t(8009);function l(e,n,t,r,o,a,u){try{var i=e[a](u),c=i.value}catch(s){return void t(s)}i.done?n(c):Promise.resolve(c).then(r,o)}function f(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var a=e.apply(n,t);function u(e){l(a,r,o,u,i,"next",e)}function i(e){l(a,r,o,u,i,"throw",e)}u(void 0)}))}}n.default=function(){var e=(0,c.il)(),n=e.mutate,t=e.isLoading,r=(0,i.X9)().data,l=(0,i.SO)().closeModal;function v(){return(v=f(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n({id:r}),l()}catch(t){l(),(0,s.e)(t)}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,a.jsx)(u.Z,{onCancel:l,onDelete:function(){return v.apply(this,arguments)},deleteBtnLoading:t})}},54605:function(e,n,t){t.d(n,{PF:function(){return b},il:function(){return O},dP:function(){return m}});var r=t(88767),o=t(66889),a=t(17785),u=t(14141);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function c(){return c=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},c.apply(this,arguments)}var s=function(e){var n=c({},e);return u.eN.get(a.P.STAFFS,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){i(e,n,t[n])}))}return e}({searchJoin:"and"},n,{search:u.eN.formatSearchParams({})}))},l=function(e){return u.eN.post(a.P.ADD_STAFF,e)},f=function(e){var n=e.id;return u.eN.delete("".concat(a.P.REMOVE_STAFF,"/").concat(n))},v=t(11163),d=t(70300),p=t(40782),y=t(90551);function h(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function g(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){h(e,n,t[n])}))}return e}var m=function(e){var n,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=(0,r.useQuery)([a.P.STAFFS,e],(function(e){var n=e.queryKey,t=e.pageParam;return s(Object.assign({},n[1],t))}),g({keepPreviousData:!0},t)),i=u.data,c=u.error,l=u.isLoading;return{staffs:null!==(n=null===i||void 0===i?void 0:i.data)&&void 0!==n?n:[],paginatorInfo:(0,o.Q)(i),error:c,loading:l}},b=function(){var e=(0,r.useQueryClient)(),n=(0,v.useRouter)(),t=(0,d.$G)().t;return(0,r.useMutation)(l,{onSuccess:function(){var e;n.push("/".concat(null===n||void 0===n||null===(e=n.query)||void 0===e?void 0:e.shop).concat(y.Z.staff.list)),p.Am.success(t("common:successfully-created"))},onSettled:function(){e.invalidateQueries(a.P.STAFFS)}})},O=function(){var e=(0,r.useQueryClient)(),n=(0,d.$G)().t;return(0,r.useMutation)(f,{onSuccess:function(){p.Am.success(n("common:successfully-deleted"))},onSettled:function(){e.invalidateQueries(a.P.STAFFS)}})}},8009:function(e,n,t){t.d(n,{e:function(){return a}});var r=t(11163),o=t(31955);function a(e){var n={message:"",validation:[]};if(e.graphQLErrors){var t=!0,a=!1,u=void 0;try{for(var i,c=e.graphQLErrors[Symbol.iterator]();!(t=(i=c.next()).done);t=!0){var s=i.value;if(s.extensions&&"validation"===s.extensions.category)return n.message=s.message,n.validation=s.extensions.validation,n;s.extensions&&"authorization"===s.extensions.category&&(o.Z.remove("auth_token"),o.Z.remove("auth_permissions"),r.default.push("/"))}}catch(l){a=!0,u=l}finally{try{t||null==c.return||c.return()}finally{if(a)throw u}}}return n.message=e.message,n}}}]);