(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4277],{41609:function(e,t,n){var r=n(280),o=n(64160),i=n(35694),c=n(1469),a=n(98612),l=n(44144),s=n(25726),u=n(36719),d=Object.prototype.hasOwnProperty;e.exports=function(e){if(null==e)return!0;if(a(e)&&(c(e)||"string"==typeof e||"function"==typeof e.splice||l(e)||u(e)||i(e)))return!e.length;var t=o(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(s(e))return!r(e).length;for(var n in e)if(d.call(e,n))return!1;return!0}},70048:function(e,t,n){"use strict";n.d(t,{Y:function(){return i}});var r=n(85893);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=function(e){return(0,r.jsx)("svg",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){o(e,t,n[t])}))}return e}({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 13 13"},e,{children:(0,r.jsx)("g",{"data-name":"Group 36431",fill:"currentColor",children:(0,r.jsx)("path",{"data-name":"Path 22671",d:"M6.5,0A6.5,6.5,0,1,0,13,6.5,6.508,6.508,0,0,0,6.5,0Zm3.633,4.789L5.979,8.911a.639.639,0,0,1-.9.016l-2.2-2a.661.661,0,0,1-.049-.912.644.644,0,0,1,.912-.033l1.743,1.6L9.2,3.861a.657.657,0,0,1,.929.929Z"})})}))}},86155:function(e,t,n){"use strict";n.d(t,{r:function(){return i}});var r=n(85893);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=function(e){return(0,r.jsx)("svg",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){o(e,t,n[t])}))}return e}({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25.056 24"},e,{children:(0,r.jsx)("g",{"data-name":"Group 36413",fill:"currentColor",children:(0,r.jsx)("path",{id:"Path_22667","data-name":"Path 22667",d:"M19.474,34.679l-6.946-4.346L5.583,34.679a.734.734,0,0,1-1.1-.8L6.469,25.93.263,20.668a.735.735,0,0,1,.421-1.3l8.1-.566,3.064-7.6a.765.765,0,0,1,1.362,0l3.064,7.6,8.1.566a.735.735,0,0,1,.421,1.3L18.588,25.93l1.987,7.949a.734.734,0,0,1-1.1.8Z",transform:"translate(0 -10.792)"})})}))}},98266:function(e,t,n){"use strict";n.d(t,{Z:function(){return I}});var r=n(85893),o=n(21873),i=n(19662),c=n(54311),a=n(27484),l=n.n(a),s=n(3620),u=n(25675),d=n(70300),f=n(51379),p=n(67294),v=n(84110),m=n.n(v),b=n(70178),g=n.n(b),h=n(29387),y=n.n(h),x=n(46619),j=n(40487),w=n(63963),O=n(96720),P=n(70048),S=n(41609),E=n.n(S),N=function(e){var t,n=e.review,o=(0,O.SO)().openModal,i=(0,d.$G)().t,c=n.comment,a=n.photos,l=n.positive_feedbacks_count,s=n.negative_feedbacks_count,f=n.user;return(0,r.jsxs)("div",{className:"block",children:[(0,r.jsxs)("div",{className:"mb-3 flex items-center text-xs text-gray-500",children:[i("common:text-by")," ",(0,r.jsx)("span",{className:"font-semibold capitalize text-heading ltr:ml-1 rtl:mr-1",children:null===f||void 0===f?void 0:f.name}),(null===f||void 0===f?void 0:f.is_active)&&(0,r.jsx)(P.Y,{className:"h-[13px] w-[13px] text-gray-700 ltr:ml-1 rtl:mr-1"})]}),(0,r.jsx)("p",{className:"text-sm leading-6 text-heading",children:c}),a&&!E()(a)&&(0,r.jsxs)("div",{className:"space-s-2 flex items-start pt-3",children:[null===a||void 0===a?void 0:a.map((function(e,o){var i;return(0,r.jsx)("div",{className:"mb-1",children:(0,r.jsx)(u.default,{src:null!==(t=null===e||void 0===e?void 0:e.original)&&void 0!==t?t:"/product-placeholder-borderless.svg",width:32,height:32,className:"inline-flex rounded-md bg-gray-200",alt:null===n||void 0===n||null===(i=n.product)||void 0===i?void 0:i.name})},o)})),(0,r.jsx)("button",{className:"my-1.5 font-semibold text-heading underline transition-colors hover:text-accent",onClick:function(){o("REVIEW_IMAGE_POPOVER",{images:a})},children:i("common:text-view-images")})]}),(0,r.jsxs)("div",{className:"mt-3 flex items-center space-x-4",children:[(0,r.jsxs)("span",{className:"flex items-center text-xs tracking-wider text-gray-400 transition",children:[(0,r.jsx)(j.l,{className:"me-1.5 h-4 w-4"}),l]}),(0,r.jsxs)("span",{className:"flex items-center text-xs tracking-wider text-gray-400 transition",children:[(0,r.jsx)(w.R,{className:"me-1.5 h-4 w-4"}),s]})]})]})},k=n(11163),_=n(80182),A=n(86155),I=function(e){var t,n=e.reviews,a=e.paginatorInfo,v=e.onPagination,b=e.onSort,h=e.onOrder,j=(0,d.$G)().t,w=(0,k.useRouter)(),P=(0,f.S)().alignLeft,S=(0,O.SO)().openModal,E=(0,p.useState)({sort:s.As.Desc,column:null}),I=E[0],C=E[1],R=function(e){return{onClick:function(){b((function(e){return e===s.As.Desc?s.As.Asc:s.As.Desc})),h(e),C({sort:I.sort===s.As.Desc?s.As.Asc:s.As.Desc,column:e})}}},D=[{title:j("table:table-item-image"),dataIndex:"product",key:"product-image",align:P,width:120,render:function(e){var n;return(0,r.jsx)(u.default,{src:null!==(t=null===e||void 0===e||null===(n=e.image)||void 0===n?void 0:n.thumbnail)&&void 0!==t?t:x.U.product.placeholder,alt:null===e||void 0===e?void 0:e.name,layout:"fixed",width:60,height:60,className:"overflow-hidden rounded"})}},{title:j("table:table-item-customer-review"),key:"review",align:P,width:650,render:function(e){return(0,r.jsx)(N,{review:e})}},{title:(0,r.jsx)(_.Z,{title:j("table:table-item-ratings"),ascending:I.sort===s.As.Asc&&"rating"===I.column,isActive:"rating"===I.column}),key:"rating",className:"cursor-pointer",align:"center",width:300,onHeaderCell:function(){return R("rating")},render:function(e){return(0,r.jsxs)("div",{className:"inline-flex shrink-0 items-center rounded-full border border-accent px-3 py-0.5 text-base text-accent",children:[null===e||void 0===e?void 0:e.rating,(0,r.jsx)(A.r,{className:"h-3 w-3 ms-1"})]})}},{title:j("table:table-item-products"),dataIndex:"product",key:"product-name",align:P,width:300,render:function(e){return(0,r.jsx)("a",{href:"".concat("http://localhost:3003","/").concat(null===e||void 0===e?void 0:e.language,"/products/").concat(null===e||void 0===e?void 0:e.slug),className:"transition-colors hover:text-accent",target:"_blank",rel:"noreferrer",children:null===e||void 0===e?void 0:e.name})}},{title:j("table:table-item-reports"),key:"report",align:"center",width:300,render:function(e){return w.query.shop?(0,r.jsx)("span",{className:"font-bold",children:null===e||void 0===e?void 0:e.abusive_reports_count}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"font-bold",children:null===e||void 0===e?void 0:e.abusive_reports_count}),(null===e||void 0===e?void 0:e.abusive_reports_count)>0&&(0,r.jsxs)("a",{href:"".concat(w.asPath,"/").concat(null===e||void 0===e?void 0:e.id),className:"text-sm transition-colors ms-2 hover:text-accent",target:"_blank",rel:"noreferrer",children:["(",j("text-details"),")"]})]})}},{title:(0,r.jsx)(_.Z,{title:j("table:table-item-date"),ascending:I.sort===s.As.Asc&&"created_at"===I.column,isActive:"created_at"===I.column}),className:"cursor-pointer",dataIndex:"created_at",key:"created_at",align:P,onHeaderCell:function(){return R("created_at")},render:function(e){return l().extend(m()),l().extend(g()),l().extend(y()),(0,r.jsx)("span",{className:"whitespace-nowrap",children:l().utc(e).tz(l().tz.guess()).fromNow()})}},{title:j("table:table-item-actions"),dataIndex:"id",key:"actions",align:"right",width:90,render:function(e){var t;return(null===w||void 0===w||null===(t=w.query)||void 0===t?void 0:t.shop)?(0,r.jsx)("button",{onClick:function(){return function(e){S("ABUSE_REPORT",{model_id:e,model_type:"Review"})}(e)},children:j("common:text-report")}):(0,r.jsx)(c.Z,{id:e,deleteModalView:"DELETE_REVIEW"})}}];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"mb-6 overflow-hidden rounded shadow",children:(0,r.jsx)(i.i,{columns:D,rowClassName:"align-top",emptyText:j("table:empty-table-data"),data:n,rowKey:"id",scroll:{x:1e3}})}),!!(null===a||void 0===a?void 0:a.total)&&(0,r.jsx)("div",{className:"flex items-center justify-end",children:(0,r.jsx)(o.Z,{total:a.total,current:a.currentPage,pageSize:a.perPage,onChange:v})})]})}},21873:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var r=n(85893),o=n(55891);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(){return c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(this,arguments)}var a=function(e){var t=c({},e);return(0,r.jsx)("svg",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){i(e,t,n[t])}))}return e}({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"20"},t,{children:(0,r.jsx)("path",{d:"M294.1 256L167 129c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.3 34 0L345 239c9.1 9.1 9.3 23.7.7 33.1L201.1 417c-4.7 4.7-10.9 7-17 7s-12.3-2.3-17-7c-9.4-9.4-9.4-24.6 0-33.9l127-127.1z",fill:"currentColor",stroke:"currentColor"})}))};function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(){return s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s.apply(this,arguments)}var u=function(e){var t=s({},e);return(0,r.jsx)("svg",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){l(e,t,n[t])}))}return e}({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"20"},t,{children:(0,r.jsx)("path",{d:"M217.9 256L345 129c9.4-9.4 9.4-24.6 0-33.9-9.4-9.4-24.6-9.3-34 0L167 239c-9.1 9.1-9.3 23.7-.7 33.1L310.9 417c4.7 4.7 10.9 7 17 7s12.3-2.3 17-7c9.4-9.4 9.4-24.6 0-33.9L217.9 256z",fill:"currentColor",stroke:"currentColor"})}))};n(89830);function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=function(e){return(0,r.jsx)(o.Z,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){d(e,t,n[t])}))}return e}({nextIcon:(0,r.jsx)(a,{}),prevIcon:(0,r.jsx)(u,{})},e))}},80182:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(85893),o=n(94184),i=n.n(o);n(67294);function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=function(e){return(0,r.jsx)("svg",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){c(e,t,n[t])}))}return e}({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 123.959 123.958"},e,{children:(0,r.jsx)("path",{d:"M117.979 28.017h-112c-5.3 0-8 6.4-4.2 10.2l56 56c2.3 2.3 6.1 2.3 8.401 0l56-56c3.799-3.8 1.099-10.2-4.201-10.2z",fill:"currentColor"})}))};function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=function(e){return(0,r.jsx)("svg",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){l(e,t,n[t])}))}return e}({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 123.959 123.959"},e,{children:(0,r.jsx)("path",{d:"M66.18 29.742c-2.301-2.3-6.101-2.3-8.401 0l-56 56c-3.8 3.801-1.1 10.2 4.2 10.2h112c5.3 0 8-6.399 4.2-10.2l-55.999-56z",fill:"currentColor"})}))},u=function(e){var t=e.title,n=e.ascending,o=e.isActive,c=void 0===o||o;return(0,r.jsxs)("span",{className:"inline-flex items-center",children:[(0,r.jsx)("span",{children:t}),n?(0,r.jsx)(s,{width:"9",className:i()("ms-1.5 flex-shrink-0 text-gray-300",{"!text-heading":c})}):(0,r.jsx)(a,{width:"9",className:i()("ms-1.5 flex-shrink-0 text-gray-300",{"!text-heading":c})})]})}},85332:function(e,t,n){"use strict";n.d(t,{Cw:function(){return g},Bs:function(){return h},hI:function(){return y},$B:function(){return x},_s:function(){return j}});var r=n(88767),o=n(40782),i=n(70300),c=n(66889),a=n(17785),l=n(96720),s=n(14511),u=n(14141);function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){d(e,t,n[t])}))}return e}function p(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var v=f({},(0,s.h)(a.P.REVIEWS),{reportAbuse:function(e){return u.eN.post(a.P.ABUSIVE_REPORTS,e)},decline:function(e){return u.eN.post(a.P.ABUSIVE_REPORTS_DECLINE,e)},get:function(e){var t=e.id;return u.eN.get("".concat(a.P.REVIEWS,"/").concat(t),{with:"abusive_reports.user;product;user"})},paginated:function(e){var t=e.type,n=e.shop_id,r=p(e,["type","shop_id"]);return u.eN.get(a.P.REVIEWS,f({searchJoin:"and",with:"product;user"},r,{search:u.eN.formatSearchParams({type:t,shop_id:n})}))}});function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){m(e,t,n[t])}))}return e}var g=function(){var e=(0,r.useQueryClient)(),t=(0,i.$G)("common").t,n=(0,l.SO)().closeModal;return(0,r.useMutation)(v.reportAbuse,{onSuccess:function(){o.Am.success(t("text-abuse-report-submitted"))},onSettled:function(){e.refetchQueries(a.P.REVIEWS),n()}})},h=function(){var e=(0,r.useQueryClient)(),t=(0,i.$G)("common").t;return(0,r.useMutation)(v.decline,{onSuccess:function(){o.Am.success(t("successfully-decline"))},onSettled:function(){e.refetchQueries(a.P.REVIEWS)}})},y=function(){var e=(0,r.useQueryClient)(),t=(0,i.$G)().t;return(0,r.useMutation)(v.delete,{onSuccess:function(){o.Am.success(t("common:successfully-deleted"))},onSettled:function(){e.invalidateQueries(a.P.REVIEWS)}})},x=function(e){return(0,r.useQuery)([a.P.REVIEWS,e],(function(){return v.get({id:e})}))},j=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=(0,r.useQuery)([a.P.REVIEWS,e],(function(e){var t=e.queryKey,n=e.pageParam;return v.paginated(Object.assign({},t[1],n))}),b({keepPreviousData:!0},n)),i=o.data,l=o.error,s=o.isLoading;return{reviews:null!==(t=null===i||void 0===i?void 0:i.data)&&void 0!==t?t:[],paginatorInfo:(0,c.Q)(i),error:l,loading:s}}}}]);