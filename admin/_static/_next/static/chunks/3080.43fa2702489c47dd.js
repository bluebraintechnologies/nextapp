"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3080],{93080:function(e,t,n){n.r(t);var r=n(34051),o=n.n(r),u=n(85893),a=n(41464),i=n(96720),c=n(93813),s=n(8009);function l(e,t,n,r,o,u,a){try{var i=e[u](a),c=i.value}catch(s){return void n(s)}i.done?t(c):Promise.resolve(c).then(r,o)}function f(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var u=e.apply(t,n);function a(e){l(u,r,o,a,i,"next",e)}function i(e){l(u,r,o,a,i,"throw",e)}a(void 0)}))}}t.default=function(){var e=(0,c.xq)(),t=e.mutate,n=e.isLoading,r=(0,i.X9)().data,l=(0,i.SO)().closeModal;function p(){return(p=f(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t({id:r}),l()}catch(n){l(),(0,s.e)(n)}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,u.jsx)(a.Z,{onCancel:l,onDelete:function(){return p.apply(this,arguments)},deleteBtnLoading:n})}},31392:function(e,t,n){n.d(t,{M:function(){return s}});var r=n(17785),o=n(14511),u=n(14141);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){a(e,t,n[t])}))}return e}function c(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},u=Object.keys(e);for(r=0;r<u.length;r++)n=u[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(r=0;r<u.length;r++)n=u[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=i({},(0,o.h)(r.P.PRODUCTS),{get:function(e){var t=e.slug,n=e.language;return u.eN.get("".concat(r.P.PRODUCTS,"/").concat(t),{language:n,with:"type;shop;categories;tags;variations.attribute.values;variation_options;author;manufacturer;digital_file"})},paginated:function(e){var t=e.type,n=e.name,o=e.categories,a=e.shop_id,s=c(e,["type","name","categories","shop_id"]);return u.eN.get(r.P.PRODUCTS,i({searchJoin:"and",with:"shop;type"},s,{search:u.eN.formatSearchParams({type:t,name:n,categories:o,shop_id:a})}))},popular:function(e){var t=e.shop_id,n=c(e,["shop_id"]);return u.eN.get(r.P.POPULAR_PRODUCTS,i({searchJoin:"and",with:"type;shop"},n,{search:u.eN.formatSearchParams({shop_id:t})}))}})},93813:function(e,t,n){n.d(t,{qX:function(){return m},wE:function(){return P},xq:function(){return O},FA:function(){return b},kN:function(){return w}});var r=n(34051),o=n.n(r),u=n(11163),a=n(40782),i=n(70300),c=n(88767),s=n(17785),l=n(31392),f=n(66889),p=n(90551),d=n(33206);function v(e,t,n,r,o,u,a){try{var i=e[u](a),c=i.value}catch(s){return void n(s)}i.done?t(c):Promise.resolve(c).then(r,o)}function g(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var u=e.apply(t,n);function a(e){v(u,r,o,a,i,"next",e)}function i(e){v(u,r,o,a,i,"throw",e)}a(void 0)}))}}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){h(e,t,n[t])}))}return e}var m=function(){var e=(0,c.useQueryClient)(),t=(0,u.useRouter)(),n=(0,i.$G)().t;return(0,c.useMutation)(l.M.create,{onSuccess:g(o().mark((function e(){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.query.shop?"/".concat(t.query.shop).concat(p.Z.product.list):p.Z.product.list,e.next=3,u.default.push(r,void 0,{locale:d.D.defaultLanguage});case 3:a.Am.success(n("common:successfully-created"));case 4:case"end":return e.stop()}}),e)}))),onSettled:function(){e.invalidateQueries(s.P.PRODUCTS)}})},P=function(){var e=(0,i.$G)().t,t=(0,c.useQueryClient)(),n=(0,u.useRouter)();return(0,c.useMutation)(l.M.update,{onSuccess:function(){var t=g(o().mark((function t(r){var u;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=n.query.shop?"/".concat(n.query.shop).concat(p.Z.product.list):p.Z.product.list,t.next=3,n.push("".concat(u,"/").concat(null===r||void 0===r?void 0:r.slug,"/edit"),void 0,{locale:d.D.defaultLanguage});case 3:a.Am.success(e("common:successfully-updated"));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),onSettled:function(){t.invalidateQueries(s.P.PRODUCTS)}})},O=function(){var e=(0,c.useQueryClient)(),t=(0,i.$G)().t;return(0,c.useMutation)(l.M.delete,{onSuccess:function(){a.Am.success(t("common:successfully-deleted"))},onSettled:function(){e.invalidateQueries(s.P.PRODUCTS)}})},b=function(e){var t=e.slug,n=e.language,r=(0,c.useQuery)([s.P.PRODUCTS,{slug:t,language:n}],(function(){return l.M.get({slug:t,language:n})}));return{product:r.data,error:r.error,isLoading:r.isLoading}},w=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(0,c.useQuery)([s.P.PRODUCTS,e],(function(e){var t=e.queryKey,n=e.pageParam;return l.M.paginated(Object.assign({},t[1],n))}),y({keepPreviousData:!0},n)),o=r.data,u=r.error,a=r.isLoading;return{products:null!==(t=null===o||void 0===o?void 0:o.data)&&void 0!==t?t:[],paginatorInfo:(0,f.Q)(o),error:u,loading:a}}},8009:function(e,t,n){n.d(t,{e:function(){return u}});var r=n(11163),o=n(31955);function u(e){var t={message:"",validation:[]};if(e.graphQLErrors){var n=!0,u=!1,a=void 0;try{for(var i,c=e.graphQLErrors[Symbol.iterator]();!(n=(i=c.next()).done);n=!0){var s=i.value;if(s.extensions&&"validation"===s.extensions.category)return t.message=s.message,t.validation=s.extensions.validation,t;s.extensions&&"authorization"===s.extensions.category&&(o.Z.remove("auth_token"),o.Z.remove("auth_permissions"),r.default.push("/"))}}catch(l){u=!0,a=l}finally{try{n||null==c.return||c.return()}finally{if(u)throw a}}}return t.message=e.message,t}}}]);