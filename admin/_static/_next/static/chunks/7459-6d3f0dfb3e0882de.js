"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7459],{38267:function(e,t,n){n.d(t,{Z:function(){return g}});var r=n(85893),o=n(50381),a=n(87536),u=n(14685),l=n(27856),i=n(66595),s=n(11163),c=n(70300),d=n(72950),f=n(67294),m=n(15239),b=n(66261),p=n(18110);function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){v(e,t,n[t])}))}return e}function g(e){var t,n=e.initialValues,v=(0,s.useRouter)(),g=(0,f.useState)(null),O=g[0],h=g[1],j=v.query.shop,x=(0,c.$G)().t,P=(0,d.DZ)({slug:j},{enabled:!!j}).data,w=null===P||void 0===P?void 0:P.id,S=(0,a.cI)({defaultValues:n||{name:"",values:[]}}),N=S.register,k=S.handleSubmit,T=S.control,E=S.formState.errors,C=(0,a.Dq)({control:T,name:"values"}),Z=C.fields,D=C.append,I=C.remove,Q=(0,p.gL)(),A=Q.mutate,_=Q.isLoading,L=(0,p.uT)(),R=L.mutate,H=L.isLoading;return(0,r.jsxs)(r.Fragment,{children:[O?(0,r.jsx)(m.Z,{message:x("common:".concat(O)),variant:"error",closeable:!0,className:"mt-5",onClose:function(){return h(null)}}):null,(0,r.jsxs)("form",{onSubmit:k((function(e){n&&n.translated_languages.includes(v.locale)?R({id:n.id,name:e.name,shop_id:Number(null===n||void 0===n?void 0:n.shop_id),values:e.values.map((function(e){var t=e.id,n=e.value,r=e.meta;return{language:v.locale,id:Number(t),value:n,meta:r}}))}):A(y({language:v.locale,name:e.name,shop_id:Number(w||(null===n||void 0===n?void 0:n.shop_id)),values:null===e||void 0===e?void 0:e.values.map((function(e){e.id;var t=e.value,n=e.meta;return{language:v.locale,value:t,meta:n}}))},(null===n||void 0===n?void 0:n.slug)&&{slug:n.slug}),{onError:function(e){var t,n;h(null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message),b.NY.scrollToTop()}})})),children:[(0,r.jsxs)("div",{className:"my-5 flex flex-wrap border-b border-dashed border-border-base pb-8 sm:my-8",children:[(0,r.jsx)(l.Z,{title:x("common:attribute"),details:"".concat(x(n?"form:item-description-update":"form:item-description-add")," ").concat(x("form:form-description-attribute-name")),className:"sm:pe-4 md:pe-5 w-full px-0 pb-5 sm:w-4/12 sm:py-8 md:w-1/3"}),(0,r.jsx)(i.Z,{className:"w-full sm:w-8/12 md:w-2/3",children:(0,r.jsx)(o.Z,y({label:x("form:input-label-name")},N("name",{required:"Name is required"}),{error:x(null===(t=E.name)||void 0===t?void 0:t.message),variant:"outline",className:"mb-5"}))})]}),(0,r.jsxs)("div",{className:"my-5 flex flex-wrap sm:my-8",children:[(0,r.jsx)(l.Z,{title:x("common:attribute-values"),details:"".concat(x(n?"form:item-description-update":"form:item-description-add")," ").concat(x("form:form-description-attribute-value")),className:"sm:pe-4 md:pe-5 w-full px-0 pb-5 sm:w-4/12 sm:py-8 md:w-1/3"}),(0,r.jsxs)(i.Z,{className:"w-full sm:w-8/12 md:w-2/3",children:[(0,r.jsx)("div",{children:Z.map((function(e,t){return(0,r.jsx)("div",{className:"border-b border-dashed border-border-200 py-5 last:border-0 md:py-8",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-5",children:[(0,r.jsx)(o.Z,y({className:"sm:col-span-2",label:x("form:input-label-value"),variant:"outline"},N("values.".concat(t,".value")),{defaultValue:e.value})),(0,r.jsx)(o.Z,y({className:"sm:col-span-2",label:x("form:input-label-meta"),variant:"outline"},N("values.".concat(t,".meta")),{defaultValue:e.meta})),(0,r.jsx)("button",{onClick:function(){return I(t)},type:"button",className:"text-sm text-red-500 transition-colors duration-200 hover:text-red-700 focus:outline-none sm:col-span-1 sm:mt-4",children:x("form:button-label-remove")})]})},e.id)}))}),(0,r.jsx)(u.Z,{type:"button",onClick:function(){return D({value:"",meta:""})},className:"w-full sm:w-auto",children:x("form:button-label-add-value")})]})]}),(0,r.jsxs)("div",{className:"text-end mb-4",children:[n&&(0,r.jsx)(u.Z,{variant:"outline",onClick:v.back,className:"me-4",type:"button",children:x("form:button-label-back")}),(0,r.jsxs)(u.Z,{loading:_||H,children:[x(n?"form:item-description-update":"form:item-description-add")," ",x("common:attribute")]})]})]})]})}},66595:function(e,t,n){var r=n(85893),o=n(94184),a=n.n(o);function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}t.Z=function(e){var t=e.className,n=l(e,["className"]);return(0,r.jsx)("div",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){u(e,t,n[t])}))}return e}({className:a()("p-5 md:p-8 bg-light shadow rounded",t)},n))}},35279:function(e,t,n){var r=n(85893),o=n(96872),a=n(58079),u=n(48123),l=n(78126);t.Z=function(e){var t=e.href,n=e.icon,i=e.label,s=(0,l.l8)().closeSidebar;return(0,r.jsxs)(o.Z,{href:t,className:"text-start flex w-full items-center text-base text-body-dark focus:text-accent",children:[(0,a.q)({iconList:u,iconName:n,className:"w-5 h-5 me-4"}),(0,r.jsx)("span",{onClick:function(){return s()},children:i})]})}},15239:function(e,t,n){var r=n(85893),o=n(94184),a=n.n(o),u=n(43031),l={info:"bg-blue-100 text-blue-600",warning:"bg-yellow-100 text-yellow-600",error:"bg-red-100 text-red-500",success:"bg-green-100 text-accent",infoOutline:"border border-blue-200 text-blue-600",warningOutline:"border border-yellow-200 text-yellow-600",errorOutline:"border border-red-200 text-red-600",successOutline:"border border-green-200 text-green-600"};t.Z=function(e){var t=e.message,n=void 0===t?"":t,o=e.closeable,i=void 0!==o&&o,s=e.variant,c=void 0===s?"info":s,d=e.className,f=e.onClose;return(0,r.jsxs)("div",{className:a()("relative flex items-center justify-between rounded py-4 px-5 shadow-sm",l[c],d),role:"alert",children:[(0,r.jsx)("p",{className:"text-sm",children:n}),i&&(0,r.jsx)("button",{"data-dismiss":"alert","aria-label":"Close",onClick:f,title:"Close alert",className:"-me-0.5 end-2 absolute top-1/2 -mt-3 flex h-6 w-6 flex-shrink-0 items-center justify-center rounded-full text-red-500 transition-colors duration-200 hover:bg-gray-300 hover:bg-opacity-25 focus:bg-gray-300 focus:bg-opacity-25 focus:outline-none",children:(0,r.jsx)("span",{"aria-hidden":"true",children:(0,r.jsx)(u.T,{className:"h-3 w-3"})})})]})}},27856:function(e,t,n){var r=n(85893);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}t.Z=function(e){var t=e.title,n=e.details,u=e.className,l=a(e,["title","details","className"]);return(0,r.jsxs)("div",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){o(e,t,n[t])}))}return e}({className:u},l,{children:[t&&(0,r.jsx)("h4",{className:"text-base font-semibold text-body-dark mb-2",children:t}),n&&(0,r.jsx)("p",{className:"text-sm text-body",children:n})]}))}},50381:function(e,t,n){var r=n(85893),o=n(94184),a=n.n(o),u=n(67294);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){l(e,t,n[t])}))}return e}function s(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var c="px-4 h-12 flex items-center w-full rounded appearance-none transition duration-300 ease-in-out text-heading text-sm focus:outline-none focus:ring-0",d="bg-gray-100 border border-border-base focus:shadow focus:bg-light focus:border-accent",f="bg-gray-100 border border-border-100 focus:bg-light focus:border-accent",m="border border-border-base focus:border-accent",b="focus:shadow",p={small:"text-sm h-10",medium:"h-12",big:"h-14"},v=u.forwardRef((function(e,t){var n,o=e.className,u=e.label,v=e.note,y=e.name,g=e.error,O=(e.children,e.variant),h=void 0===O?"normal":O,j=e.dimension,x=void 0===j?"medium":j,P=e.shadow,w=void 0!==P&&P,S=e.type,N=void 0===S?"text":S,k=e.inputClassName,T=e.disabled,E=e.showLabel,C=void 0===E||E,Z=s(e,["className","label","note","name","error","children","variant","dimension","shadow","type","inputClassName","disabled","showLabel"]),D=a()(c,(l(n={},d,"normal"===h),l(n,f,"solid"===h),l(n,m,"outline"===h),n),l({},b,w),p[x],k),I="number"===N&&T?"number-disable":"";return(0,r.jsxs)("div",{className:o,children:[C?(0,r.jsx)("label",{htmlFor:y,className:"mb-3 block text-sm font-semibold leading-none text-body-dark",children:u}):"",(0,r.jsx)("input",i({id:y,name:y,type:N,ref:t,className:"".concat(D," ").concat(T?"cursor-not-allowed border-[#D4D8DD] bg-[#EEF1F4] ".concat(I," select-none"):""),autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:"false",disabled:T,"aria-invalid":g?"true":"false"},Z)),v&&(0,r.jsx)("p",{className:"mt-2 text-xs text-body",children:v}),g&&(0,r.jsx)("p",{className:"my-2 text-xs text-red-500 text-start",children:g})]})}));v.displayName="Input",t.Z=v},18110:function(e,t,n){n.d(t,{I1:function(){return j},OO:function(){return x},gL:function(){return g},Oi:function(){return h},uT:function(){return O}});var r=n(11163),o=n(88767),a=n(40782),u=n(70300),l=n(90551),i=n(17785),s=n(14511),c=n(14141);function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){d(e,t,n[t])}))}return e}function m(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var b=f({},(0,s.h)(i.P.ATTRIBUTES),{paginated:function(e){var t=e.type,n=e.name,r=e.shop_id,o=m(e,["type","name","shop_id"]);return c.eN.get(i.P.ATTRIBUTES,f({searchJoin:"and"},o,{search:c.eN.formatSearchParams({type:t,name:n,shop_id:r})}))},all:function(e){var t=e.type,n=e.name,r=e.shop_id,o=m(e,["type","name","shop_id"]);return c.eN.get(i.P.ATTRIBUTES,f({searchJoin:"and"},o,{search:c.eN.formatSearchParams({type:t,name:n,shop_id:r})}))}}),p=n(33206);function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){v(e,t,n[t])}))}return e}var g=function(){var e=(0,o.useQueryClient)(),t=(0,u.$G)().t;return(0,o.useMutation)(b.create,{onSuccess:function(){r.default.push(l.Z.attribute.list,void 0,{locale:p.D.defaultLanguage}),a.Am.success(t("common:successfully-created"))},onSettled:function(){e.invalidateQueries(i.P.ATTRIBUTES)}})},O=function(){var e=(0,u.$G)().t,t=(0,o.useQueryClient)();return(0,o.useMutation)(b.update,{onSuccess:function(){a.Am.success(e("common:successfully-updated"))},onSettled:function(){t.invalidateQueries(i.P.ATTRIBUTES)}})},h=function(){var e=(0,o.useQueryClient)(),t=(0,u.$G)().t;return(0,o.useMutation)(b.delete,{onSuccess:function(){a.Am.success(t("common:successfully-deleted"))},onSettled:function(){e.invalidateQueries(i.P.ATTRIBUTES)}})},j=function(e){var t=e.slug,n=e.language;return(0,o.useQuery)([i.P.ATTRIBUTES,{slug:t,language:n}],(function(){return b.get({slug:t,language:n})}))},x=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(0,o.useQuery)([i.P.ATTRIBUTES,e],(function(e){var t=e.queryKey,n=e.pageParam;return b.all(Object.assign({},t[1],n))}),y({keepPreviousData:!0},t)),r=n.data,a=n.error,u=n.isLoading;return{attributes:null!==r&&void 0!==r?r:[],error:a,loading:u}}},72950:function(e,t,n){n.d(t,{bg:function(){return v},TC:function(){return g},mj:function(){return y},DZ:function(){return h},uL:function(){return j},D9:function(){return O}});var r=n(70300),o=n(90551),a=n(88767),u=n(17785),l=n(40782),i=n(14141);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){s(e,t,n[t])}))}return e}function d(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var f=c({},(0,n(14511).h)(u.P.SHOPS),{get:function(e){var t=e.slug;return i.eN.get("".concat(u.P.SHOPS,"/").concat(t))},paginated:function(e){var t=e.name,n=d(e,["name"]);return i.eN.get(u.P.SHOPS,c({searchJoin:"and"},n,{search:i.eN.formatSearchParams({name:t})}))},approve:function(e){return i.eN.post(u.P.APPROVE_SHOP,e)},disapprove:function(e){return i.eN.post(u.P.DISAPPROVE_SHOP,e)}}),m=n(66889),b=n(11163),p=n(6943),v=function(){var e=(0,r.$G)().t,t=(0,a.useQueryClient)();return(0,a.useMutation)(f.approve,{onSuccess:function(){l.Am.success(e("common:successfully-updated"))},onSettled:function(){t.invalidateQueries(u.P.SHOPS)}})},y=function(){var e=(0,r.$G)().t,t=(0,a.useQueryClient)();return(0,a.useMutation)(f.disapprove,{onSuccess:function(){l.Am.success(e("common:successfully-updated"))},onSettled:function(){t.invalidateQueries(u.P.SHOPS)}})},g=function(){var e=(0,a.useQueryClient)(),t=(0,b.useRouter)();return(0,a.useMutation)(f.create,{onSuccess:function(){var e=(0,p.WA)().permissions;if((0,p.Ft)(p.M$,e))return t.push(o.Z.adminMyShops);t.push(o.Z.dashboard)},onSettled:function(){e.invalidateQueries(u.P.SHOPS)}})},O=function(){var e=(0,r.$G)().t,t=(0,a.useQueryClient)();return(0,a.useMutation)(f.update,{onSuccess:function(){l.Am.success(e("common:successfully-updated"))},onSettled:function(){t.invalidateQueries(u.P.SHOPS)}})},h=function(e,t){var n=e.slug;return(0,a.useQuery)([u.P.SHOPS,{slug:n}],(function(){return f.get({slug:n})}),t)},j=function(e){var t,n=(0,a.useQuery)([u.P.SHOPS,e],(function(e){var t=e.queryKey,n=e.pageParam;return f.paginated(Object.assign({},t[1],n))}),{keepPreviousData:!0}),r=n.data,o=n.error,l=n.isLoading;return{shops:null!==(t=null===r||void 0===r?void 0:r.data)&&void 0!==t?t:[],paginatorInfo:(0,m.Q)(r),error:o,loading:l}}},58079:function(e,t,n){n.d(t,{q:function(){return u}});var r=n(85893);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var u=function(e){var t=e.iconList,n=e.iconName,u=a(e,["iconList","iconName"]),l=t[n];return l?(0,r.jsx)(l,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){o(e,t,n[t])}))}return e}({},u)):(0,r.jsxs)("p",{className:"text-sm text-red-500",children:[n," is not a valid icon"]})}}}]);