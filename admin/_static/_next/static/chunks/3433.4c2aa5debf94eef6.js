"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3433],{95496:function(e,r,t){t.d(r,{X:function(){return i}});var n=t(87536),o=function(e,r,t){if(e&&"reportValidity"in e){var o=(0,n.U2)(t,r);e.setCustomValidity(o&&o.message||""),e.reportValidity()}},a=function(e,r){var t=function(t){var n=r.fields[t];n&&n.ref&&"reportValidity"in n.ref?o(n.ref,t,e):n.refs&&n.refs.forEach((function(r){return o(r,t,e)}))};for(var n in r.fields)t(n)},u=function(e,r){r.shouldUseNativeValidation&&a(e,r);var t={};for(var o in e){var u=(0,n.U2)(r.fields,o);(0,n.t8)(t,o,Object.assign(e[o],{ref:u&&u.ref}))}return t},i=function(e,r,t){return void 0===r&&(r={}),void 0===t&&(t={}),function(i,c,l){try{return Promise.resolve(function(n,u){try{var s=(r.context,Promise.resolve(e["sync"===t.mode?"validateSync":"validate"](i,Object.assign({abortEarly:!1},r,{context:c}))).then((function(e){return l.shouldUseNativeValidation&&a({},l),{values:e,errors:{}}})))}catch(o){return u(o)}return s&&s.then?s.then(void 0,u):s}(0,(function(e){if(!e.inner)throw e;return{values:{},errors:u((r=e,t=!l.shouldUseNativeValidation&&"all"===l.criteriaMode,(r.inner||[]).reduce((function(e,r){if(e[r.path]||(e[r.path]={message:r.message,type:r.type}),t){var o=e[r.path].types,a=o&&o[r.type];e[r.path]=(0,n.KN)(r.path,t,e,r.type,a?[].concat(a,r.message):r.message)}return e}),{})),l)};var r,t})))}catch(o){return Promise.reject(o)}}}},23433:function(e,r,t){t.r(r),t.d(r,{default:function(){return f}});var n=t(85893),o=t(70300),a=t(17327),u=t(57818),i=t(14685),c=t(85332);function l(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function s(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){l(e,r,t[r])}))}return e}function f(e){var r=e.data,t=(0,o.$G)("common").t,l=(0,c.Cw)(),f=l.mutate,d=l.isLoading;return(0,n.jsx)("div",{className:"flex h-full min-h-screen w-screen flex-col justify-center bg-light p-7 md:h-auto md:min-h-0 md:max-w-[590px] md:rounded-xl",children:(0,n.jsx)(a.l,{onSubmit:function(e){f(s({},r,e))},children:function(e){var r=e.register;return(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)(u.Z,s({label:t("text-reason")},r("message"))),(0,n.jsx)(i.Z,{loading:d,disabled:d,children:t("text-report")})]})}})})}},17327:function(e,r,t){t.d(r,{l:function(){return d}});var n=t(85893),o=t(87536),a=t(95496),u=t(67294);function i(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function c(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function l(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){c(e,r,t[r])}))}return e}function s(e,r){if(null==e)return{};var t,n,o=function(e,r){if(null==e)return{};var t,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)t=a[n],r.indexOf(t)>=0||(o[t]=e[t]);return o}(e,r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)t=a[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}function f(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,o,a=[],u=!0,i=!1;try{for(t=t.call(e);!(u=(n=t.next()).done)&&(a.push(n.value),!r||a.length!==r);u=!0);}catch(c){i=!0,o=c}finally{try{u||null==t.return||t.return()}finally{if(i)throw o}}return a}}(e,r)||function(e,r){if(!e)return;if("string"===typeof e)return i(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return i(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var d=function(e){var r=e.onSubmit,t=e.children,i=e.options,c=e.validationSchema,d=e.serverError,b=e.resetValues,y=s(e,["onSubmit","children","options","validationSchema","serverError","resetValues"]),p=(0,o.cI)(l({},!!c&&{resolver:(0,a.X)(c)},!!i&&i));return(0,u.useEffect)((function(){d&&Object.entries(d).forEach((function(e){var r=f(e,2),t=r[0],n=r[1];p.setError(t,{type:"manual",message:n})}))}),[d,p]),(0,u.useEffect)((function(){b&&p.reset(b)}),[b,p]),(0,n.jsx)("form",l({onSubmit:p.handleSubmit(r),noValidate:!0},y,{children:t(p)}))}},57818:function(e,r,t){var n=t(85893),o=t(94184),a=t.n(o),u=t(67294);function i(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function c(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){i(e,r,t[r])}))}return e}function l(e,r){if(null==e)return{};var t,n,o=function(e,r){if(null==e)return{};var t,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)t=a[n],r.indexOf(t)>=0||(o[t]=e[t]);return o}(e,r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)t=a[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var s="py-3 px-4 w-full rounded appearance-none transition duration-300 ease-in-out text-heading text-sm focus:outline-none focus:ring-0",f="bg-gray-100 border border-border-base focus:shadow focus:bg-light focus:border-accent",d="bg-gray-100 border border-border-100 focus:bg-light focus:border-accent",b="border border-border-base focus:border-accent",y="focus:shadow",p=u.forwardRef((function(e,r){var t,o=e.className,u=e.label,p=e.name,m=e.error,v=e.variant,h=void 0===v?"normal":v,g=e.shadow,O=void 0!==g&&g,j=e.inputClassName,S=e.disabled,w=l(e,["className","label","name","error","variant","shadow","inputClassName","disabled"]),P=a()(s,(i(t={},f,"normal"===h),i(t,d,"solid"===h),i(t,b,"outline"===h),t),i({},y,O),j);return(0,n.jsxs)("div",{className:o,children:[u&&(0,n.jsx)("label",{className:"block text-body-dark font-semibold text-sm leading-none mb-3",children:u}),(0,n.jsx)("textarea",c({id:p,name:p,className:"".concat(P," ").concat(S?"cursor-not-allowed bg-[#EEF1F4] border-[#D4D8DD]":""),autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:"false",rows:4,ref:r,disabled:S},w)),m&&(0,n.jsx)("p",{className:"my-2 text-xs text-end text-red-500",children:m})]})}));p.displayName="TextArea",r.Z=p},85332:function(e,r,t){t.d(r,{Cw:function(){return v},Bs:function(){return h},hI:function(){return g},$B:function(){return O},_s:function(){return j}});var n=t(88767),o=t(40782),a=t(70300),u=t(66889),i=t(17785),c=t(96720),l=t(14511),s=t(14141);function f(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function d(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){f(e,r,t[r])}))}return e}function b(e,r){if(null==e)return{};var t,n,o=function(e,r){if(null==e)return{};var t,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)t=a[n],r.indexOf(t)>=0||(o[t]=e[t]);return o}(e,r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)t=a[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var y=d({},(0,l.h)(i.P.REVIEWS),{reportAbuse:function(e){return s.eN.post(i.P.ABUSIVE_REPORTS,e)},decline:function(e){return s.eN.post(i.P.ABUSIVE_REPORTS_DECLINE,e)},get:function(e){var r=e.id;return s.eN.get("".concat(i.P.REVIEWS,"/").concat(r),{with:"abusive_reports.user;product;user"})},paginated:function(e){var r=e.type,t=e.shop_id,n=b(e,["type","shop_id"]);return s.eN.get(i.P.REVIEWS,d({searchJoin:"and",with:"product;user"},n,{search:s.eN.formatSearchParams({type:r,shop_id:t})}))}});function p(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function m(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){p(e,r,t[r])}))}return e}var v=function(){var e=(0,n.useQueryClient)(),r=(0,a.$G)("common").t,t=(0,c.SO)().closeModal;return(0,n.useMutation)(y.reportAbuse,{onSuccess:function(){o.Am.success(r("text-abuse-report-submitted"))},onSettled:function(){e.refetchQueries(i.P.REVIEWS),t()}})},h=function(){var e=(0,n.useQueryClient)(),r=(0,a.$G)("common").t;return(0,n.useMutation)(y.decline,{onSuccess:function(){o.Am.success(r("successfully-decline"))},onSettled:function(){e.refetchQueries(i.P.REVIEWS)}})},g=function(){var e=(0,n.useQueryClient)(),r=(0,a.$G)().t;return(0,n.useMutation)(y.delete,{onSuccess:function(){o.Am.success(r("common:successfully-deleted"))},onSettled:function(){e.invalidateQueries(i.P.REVIEWS)}})},O=function(e){return(0,n.useQuery)([i.P.REVIEWS,e],(function(){return y.get({id:e})}))},j=function(e){var r,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=(0,n.useQuery)([i.P.REVIEWS,e],(function(e){var r=e.queryKey,t=e.pageParam;return y.paginated(Object.assign({},r[1],t))}),m({keepPreviousData:!0},t)),a=o.data,c=o.error,l=o.isLoading;return{reviews:null!==(r=null===a||void 0===a?void 0:a.data)&&void 0!==r?r:[],paginatorInfo:(0,u.Q)(a),error:c,loading:l}}}}]);